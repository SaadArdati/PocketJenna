rules_version = '2';
service cloud.firestore {
    match /databases/{database}/documents {
        match /dumbledore-bot/{id} {
            allow read, write: if true;
        }
        match /dumbledore-bot/{id}/messages/{id2} {
            allow read, write: if true;
        }
        match /users/{id} {
            allow read: if request.auth.uid == id;
            allow write: if false;
        }
        match /users/{id}/documents/{docId} {
            allow read, write: if request.auth.uid == id;
        }
        match /users/{id}/chats/{chatId} {
            allow read: if request.auth.uid == id;
            allow write: if false;
        }
        match /the-hierophant-assets/{id} {
            allow read: if true;
            allow write: if request.auth != null && request.auth.uid in get(/databases/$(database)/documents/the-hierophant-meta/admins).data.admins;
        }
        match /the-hierophant-dialogue-cards/{id} {
            allow read: if true;
            allow write: if request.auth != null && request.auth.uid in get(/databases/$(database)/documents/the-hierophant-meta/admins).data.admins;
        }
        match /the-hierophant-dialogues/{id} {
            allow read: if true;
            allow write: if request.auth != null && request.auth.uid in get(/databases/$(database)/documents/the-hierophant-meta/admins).data.admins;
        }
        match /the-hierophant-translations/{id} {
            allow read: if true;
            allow write: if request.auth != null;
        }
        match /the-hierophant-meta/{id} {
            allow read: if true;
            allow write: if request.auth != null && request.auth.uid in get(/databases/$(database)/documents/the-hierophant-meta/admins).data.admins;
        }
    }
}
